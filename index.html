<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>OMLLA CAPITAL â€¢ PREMIER EARNINGS</title>
    
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root {
            --primary: #5d5fef; --primary-dark: #4749d1;
            --bg: #f8f9ff; --text: #1a1a1a; --white: #ffffff;
            --green: #14ca82; --gray: #8e8e93;
        }

        /* Responsive Logic */
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', sans-serif; }
        body { background-color: var(--bg); color: var(--text); min-height: 100vh; display: flex; flex-direction: column; align-items: center; }

        .app-container {
            width: 100%; max-width: 500px; /* PC Optimization */
            min-height: 100vh; background: var(--bg); position: relative;
            box-shadow: 0 0 50px rgba(0,0,0,0.05); padding-bottom: 100px;
        }

        /* Design Elements */
        .top-nav { background: var(--primary); color: white; padding: 40px 20px 80px; text-align: center; border-bottom-left-radius: 40px; border-bottom-right-radius: 40px; }
        .top-nav h1 { font-size: 26px; letter-spacing: -1px; }

        .dashboard-card {
            background: var(--white); width: 90%; border-radius: 25px; margin: -50px auto 20px;
            padding: 25px; box-shadow: 0 10px 30px rgba(93, 95, 239, 0.1);
            display: flex; justify-content: space-around; text-align: center;
        }
        .stat b { display: block; font-size: 24px; color: var(--primary); font-weight: 800; }
        .stat span { font-size: 11px; color: var(--gray); font-weight: 600; text-transform: uppercase; }

        /* Profile Section */
        .user-profile { display: flex; align-items: center; padding: 0 25px; margin-bottom: 20px; }
        .avatar { width: 50px; height: 50px; background: var(--secondary); border-radius: 15px; display: flex; align-items: center; justify-content: center; font-size: 20px; color: white; margin-right: 15px; background: var(--primary-dark); }
        .user-meta b { font-size: 16px; display: block; }
        .user-meta span { font-size: 12px; color: var(--green); font-weight: 700; }

        /* Tab Content */
        .page { display: none; padding: 0 25px; animation: fadeIn 0.4s ease-out; }
        .page.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Offer & Action Cards */
        .card { background: var(--white); border-radius: 20px; padding: 18px; margin-bottom: 15px; display: flex; align-items: center; cursor: pointer; transition: 0.2s; border: 1px solid transparent; }
        .card:hover { border-color: var(--primary); }
        .card-icon { width: 45px; height: 45px; background: #f0f1ff; border-radius: 12px; display: flex; align-items: center; justify-content: center; color: var(--primary); font-size: 20px; margin-right: 15px; }
        .card-info { flex: 1; }
        .card-info b { font-size: 14px; display: block; }
        .card-info small { color: var(--green); font-weight: 700; }

        /* Settings Input */
        .settings-group { background: white; padding: 20px; border-radius: 20px; margin-top: 10px; }
        label { font-size: 12px; color: var(--gray); font-weight: 700; margin-bottom: 8px; display: block; }
        input { width: 100%; padding: 14px; border-radius: 12px; border: 1px solid #eee; margin-bottom: 15px; background: #f9f9fb; outline: none; }

        /* Navigation */
        .bottom-nav { position: fixed; bottom: 0; width: 100%; max-width: 500px; background: white; display: flex; justify-content: space-around; padding: 15px 0; border-top: 1px solid #eee; }
        .nav-item { color: #ccc; text-align: center; font-size: 10px; cursor: pointer; font-weight: 700; }
        .nav-item.active { color: var(--primary); }
        .nav-item i { font-size: 22px; display: block; margin-bottom: 4px; }

        .btn-full { width: 100%; background: var(--primary); color: white; border: none; padding: 16px; border-radius: 15px; font-weight: 700; cursor: pointer; }
    </style>
</head>
<body>

<div class="app-container">
    <div class="top-nav">
        <h1>OMLLA CAPITAL</h1>
        <p>Global Earning Network</p>
    </div>

    <div class="dashboard-card">
        <div class="stat">
            <b id="bal-coins">0</b>
            <span>Coins</span>
        </div>
        <div style="width: 1px; height: 40px; background: #eee;"></div>
        <div class="stat">
            <b id="bal-usd">$0.00</b>
            <span>Available USD</span>
        </div>
    </div>

    <div class="user-profile">
        <div class="avatar" id="user-icon">U</div>
        <div class="user-meta">
            <b id="user-name">Loading...</b>
            <span id="user-status">Elite Member</span>
        </div>
    </div>

    <div id="home" class="page active">
        <div style="text-align: center; padding: 20px 0;">
            <div id="tap-target" style="width: 180px; height: 180px; background: linear-gradient(135deg, var(--primary), var(--primary-dark)); border-radius: 50%; margin: 0 auto; display: flex; align-items: center; justify-content: center; color: white; font-size: 50px; cursor: pointer; box-shadow: 0 15px 35px rgba(93, 95, 239, 0.3);">
                <i class="fas fa-hand-holding-usd"></i>
            </div>
            <p style="margin-top: 25px; color: var(--gray); font-weight: 600;">Energy Supply: <span id="energy">1000</span>/1000</p>
            <div style="width: 200px; height: 6px; background: #eef; margin: 10px auto; border-radius: 10px; overflow: hidden;">
                <div id="energy-bar" style="width: 100%; height: 100%; background: var(--primary); transition: 0.3s;"></div>
            </div>
        </div>
    </div>

    <div id="offers" class="page">
        <h3 style="margin-bottom: 15px;">Earn Massive Rewards</h3>
        <div class="card" onclick="runAd()">
            <div class="card-icon"><i class="fas fa-video"></i></div>
            <div class="card-info"><b>Watch Video Ad</b><small>+1,200 Coins</small></div>
            <i class="fas fa-chevron-right" style="color:#eee"></i>
        </div>
        <div class="card" onclick="openMonlix()">
            <div class="card-icon"><i class="fas fa-grid-2"></i></div>
            <div class="card-info"><b>Monlix Offerwall</b><small>Up to $50.00 Reward</small></div>
            <i class="fas fa-chevron-right" style="color:#eee"></i>
        </div>
    </div>

    <div id="settings" class="page">
        <h3 style="margin-bottom: 15px;">Payment Settings</h3>
        <div class="settings-group">
            <label>PAYPAL EMAIL</label>
            <input type="email" id="set-paypal" placeholder="yourname@email.com">
            
            <label>SOLANA (SOL) ADDRESS</label>
            <input type="text" id="set-solana" placeholder="Enter Solana Wallet">
            
            <button class="btn-full" onclick="saveSettings()">SAVE PROFILE</button>
            <p style="text-align: center; font-size: 11px; color: var(--gray); margin-top: 15px;">Payments are processed every Friday.</p>
        </div>
    </div>

    <nav class="bottom-nav">
        <div class="nav-item active" onclick="nav('home', this)"><i class="fas fa-house"></i>Home</div>
        <div class="nav-item" onclick="nav('offers', this)"><i class="fas fa-rocket"></i>Offers</div>
        <div class="nav-item" onclick="nav('settings', this)"><i class="fas fa-user-gear"></i>Profile</div>
    </nav>
</div>

<script>
    const FIREBASE_URL = "https://omllagame-default-rtdb.europe-west1.firebasedatabase.app/";
    const ADSTERRA_LINK = "<script src="https://pl28803296.effectivegatecpm.com/2c/dd/09/2cdd09776aa553dca3c7d1f937532fa7.js"></script>
    const MONLIX_LINK = "https://publisher.monlix.com/apps/20163"; // Your Monlix

    const tg = window.Telegram.WebApp;
    tg.expand();

    firebase.initializeApp({ databaseURL: FIREBASE_URL });
    const db = firebase.database();
    const user = tg.initDataUnsafe?.user || { id: "PC_USER", first_name: "Web Guest" };
    const userRef = db.ref('players/' + user.id);

    let state = { points: 0, energy: 1000 };

    // Sync Data
    userRef.on('value', snap => {
        const data = snap.val();
        if (data) {
            state.points = data.points || 0;
            state.energy = data.energy !== undefined ? data.energy : 1000;
            document.getElementById('set-paypal').value = data.paypal || "";
            document.getElementById('set-solana').value = data.solana || "";
            updateUI();
        } else { userRef.set({ points: 0, energy: 1000, name: user.first_name }); }
        document.getElementById('user-name').innerText = user.first_name;
        document.getElementById('user-icon').innerText = user.first_name.charAt(0);
    });

    function updateUI() {
        document.getElementById('bal-coins').innerText = Math.floor(state.points).toLocaleString();
        document.getElementById('bal-usd').innerText = "$" + (state.points / 10000).toFixed(2);
        document.getElementById('energy').innerText = state.energy;
        document.getElementById('energy-bar').style.width = (state.energy / 10) + "%";
    }

    document.getElementById('tap-target').onclick = () => {
        if (state.energy > 0) {
            state.points += 2; state.energy--;
            userRef.update({ points: state.points, energy: state.energy });
            if(window.Telegram.WebApp.HapticFeedback) tg.HapticFeedback.impactOccurred('light');
        }
    };

    function nav(p, el) {
        document.querySelectorAll('.page').forEach(x => x.classList.remove('active'));
        document.getElementById(p).classList.add('active');
        document.querySelectorAll('.nav-item').forEach(x => x.classList.remove('active'));
        el.classList.add('active');
    }

    function saveSettings() {
        const paypal = document.getElementById('set-paypal').value;
        const solana = document.getElementById('set-solana').value;
        userRef.update({ paypal, solana });
        tg.showAlert("Profile updated successfully!");
    }

    function runAd() {
        tg.openLink(ADSTERRA_LINK);
        tg.showConfirm("Did you complete the video to claim 1,200 Coins?", (ok) => {
            if(ok) userRef.child('points').transaction(p => (p || 0) + 1200);
        });
    }

    function openMonlix() { tg.openLink(MONLIX_LINK); }

    setInterval(() => {
        if(state.energy < 1000) { state.energy++; userRef.child('energy').set(state.energy); }
    }, 5000);
</script>
</body>
</html>

