<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Omlla Clicker</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root { --main-color: #f3ba2f; --bg-color: #0d0d0d; }
        body { background: var(--bg-color); color: white; font-family: sans-serif; text-align: center; margin: 0; overflow: hidden; user-select: none; }
        .stats { margin-top: 40px; font-size: 42px; font-weight: bold; color: var(--main-color); }
        .coin-container { margin-top: 60px; position: relative; display: inline-block; }
        .coin { width: 220px; height: 220px; border-radius: 50%; background: radial-gradient(circle, #f3ba2f 0%, #a47c00 100%); 
                box-shadow: 0 0 50px rgba(243, 186, 47, 0.3); cursor: pointer; transition: transform 0.1s; border: 8px solid #333; }
        .coin:active { transform: scale(0.95); }
        .plus-one { position: absolute; color: var(--main-color); font-size: 24px; font-weight: bold; animation: floatUp 0.8s forwards; pointer-events: none; }
        @keyframes floatUp { 0% { opacity: 1; transform: translateY(0); } 100% { opacity: 0; transform: translateY(-100px); } }
        .footer { position: fixed; bottom: 20px; width: 100%; font-size: 14px; opacity: 0.6; }
    </style>
</head>
<body>

    <div class="stats" id="score">0</div>
    <div style="font-size: 18px; color: #888;">COINS</div>

    <div class="coin-container">
        <div class="coin" id="coinBtn"></div>
    </div>

    <div class="footer">Omlla Ecosystem - Powered by Telegram</div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand(); // لفتح الواجهة بكامل الشاشة

        let score = parseInt(localStorage.getItem('omlla_score')) || 0;
        const scoreEl = document.getElementById('score');
        const coinBtn = document.getElementById('coinBtn');

        scoreEl.innerText = score.toLocaleString();

        coinBtn.addEventListener('touchstart', (e) => {
            e.preventDefault(); // منع الزووم
            score++;
            scoreEl.innerText = score.toLocaleString();
            localStorage.setItem('omlla_score', score);

            // اهتزاز خفيف (Haptic Feedback)
            if (tg.HapticFeedback) tg.HapticFeedback.impactOccurred('medium');

            // تأثير +1
            const touch = e.touches[0];
            createPlusOne(touch.clientX, touch.clientY);
        });

        function createPlusOne(x, y) {
            const plus = document.createElement('div');
            plus.innerText = '+1';
            plus.className = 'plus-one';
            plus.style.left = x + 'px';
            plus.style.top = y + 'px';
            document.body.appendChild(plus);
            setTimeout(() => plus.remove(), 800);
        }
    </script>
</body>
</html>
