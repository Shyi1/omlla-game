<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Solana Elite - Lacoste Edition</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <style>
        :root {
            --lacoste-green: #004526;
            --solana-neon: #14F195;
            --premium-gold: #c5a059;
            --dark-bg: #050505;
        }

        body {
            background: radial-gradient(circle at center, #0a1f14 0%, var(--dark-bg) 100%);
            color: white;
            font-family: 'Inter', -apple-system, sans-serif;
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            height: 100vh;
            overflow: hidden;
            user-select: none;
        }

        .header {
            margin-top: 60px;
            text-align: center;
        }

        .balance-label {
            font-size: 11px;
            letter-spacing: 4px;
            color: var(--solana-neon);
            text-transform: uppercase;
            font-weight: 700;
            opacity: 0.8;
        }

        #score {
            font-size: 68px;
            font-weight: 900;
            margin: 10px 0;
            text-shadow: 0 0 30px rgba(20, 241, 149, 0.2);
        }

        .game-container {
            flex-grow: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
        }

        /* Professional SVG Coin */
        .premium-coin {
            width: 280px;
            height: 280px;
            background: linear-gradient(145deg, #005a32, #002a16);
            border-radius: 50%;
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 0 60px rgba(0, 69, 38, 0.4), inset 0 0 20px rgba(255, 255, 255, 0.1);
            border: 6px solid #001a0d;
            transition: transform 0.05s ease;
        }

        .premium-coin:active { transform: scale(0.94); }

        /* The Lacoste-Style Logo (High Quality SVG) */
        .lacoste-logo {
            width: 140px;
            fill: white;
            filter: drop-shadow(0 4px 6px rgba(0,0,0,0.3));
        }

        .coin-brand {
            margin-top: 10px;
            font-weight: 900;
            font-size: 22px;
            letter-spacing: 3px;
            color: white;
        }

        /* UI Elements */
        .energy-wrapper {
            width: 85%;
            margin-bottom: 30px;
            background: rgba(255, 255, 255, 0.03);
            padding: 15px;
            border-radius: 20px;
            border: 1px solid rgba(255,255,255,0.05);
        }

        .energy-bar {
            height: 8px;
            background: #111;
            border-radius: 4px;
            margin-top: 10px;
            overflow: hidden;
        }

        .energy-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--solana-neon), #00ff87);
            width: 100%;
            transition: width 0.2s;
        }

        .floating-point {
            position: absolute;
            color: var(--solana-neon);
            font-size: 32px;
            font-weight: 900;
            pointer-events: none;
            animation: riseFade 0.7s ease-out forwards;
        }

        @keyframes riseFade {
            0% { opacity: 1; transform: translateY(0); }
            100% { opacity: 0; transform: translateY(-140px); }
        }

        .signature {
            margin-bottom: 20px;
            font-size: 10px;
            letter-spacing: 3px;
            color: rgba(255,255,255,0.2);
            text-transform: uppercase;
        }
        .signature span { color: var(--solana-neon); font-weight: bold; }
    </style>
</head>
<body>

    <div class="header">
        <div class="balance-label">Solana Balance</div>
        <div id="score">0</div>
    </div>

    <div class="game-container">
        <div class="premium-coin" id="coinBtn">
            <svg class="lacoste-logo" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M22,14.5c0-0.83-0.67-1.5-1.5-1.5h-1c-0.28,0-0.5,0.22-0.5,0.5s0.22,0.5,0.5,0.5h1c0.28,0,0.5,0.22,0.5,0.5s-0.22,0.5-0.5,0.5H19 c-1.66,0-3-1.34-3-3s1.34-3,3-3h1.5c0.83,0,1.5-0.67,1.5-1.5S21.33,7,20.5,7H19c-2.76,0-5,2.24-5,5s2.24,5,5,5h1.5 C21.33,17,22,16.33,22,15.5V14.5z M11,12c0-3.87-3.13-7-7-7S0,8.13,0,12s3.13,7,7,7S14,15.87,14,12z M7,17c-2.76,0-5-2.24-5-5s2.24-5,5-5 s5,2.24,5,5S9.76,17,7,17z M7,9c-1.66,0-3,1.34-3,3s1.34,3,3,3s3-1.34,3-3S8.66,9,7,9z"/>
                <path d="M18.5,10c-0.28,0-0.5,0.22-0.5,0.5v1c0,0.28,0.22,0.5,0.5,0.5s0.5-0.22,0.5-0.5v-1C19,10.22,18.78,10,18.5,10z"/>
                <path d="M4,12c0,1.66,1.34,3,3,3s3-1.34,3-3s-1.34-3-3-3S4,10.34,4,12z M7,10.5c0.83,0,1.5,0.67,1.5,1.5S7.83,13.5,7,13.5 S5.5,12.83,5.5,12S6.17,10.5,7,10.5z"/>
            </svg>
            <div class="coin-brand">SOLANA</div>
        </div>
    </div>

    <div class="energy-wrapper">
        <div style="display: flex; justify-content: space-between; font-size: 13px;">
            <span>âš¡ <span id="currentEnergy">2000</span> / 2000</span>
            <span style="color: var(--solana-neon);">BOOST Ready</span>
        </div>
        <div class="energy-bar">
            <div class="energy-fill" id="energyFill"></div>
        </div>
    </div>

    <div class="signature">Crafted by <span>/Yous</span></div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        // Firebase Sync
        const firebaseConfig = { databaseURL: "https://omllagame-default-rtdb.europe-west1.firebasedatabase.app/" };
        if (!firebase.apps.length) firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        const userId = tg.initDataUnsafe?.user?.id || "dev_user";
        let score = parseInt(localStorage.getItem('sol_score')) || 0;
        let energy = 2000;
        const maxEnergy = 2000;

        const scoreEl = document.getElementById('score');
        const energyEl = document.getElementById('currentEnergy');
        const energyFill = document.getElementById('energyFill');

        scoreEl.innerText = score.toLocaleString();

        // Load points from Cloud
        db.ref('players/' + userId).once('value', (snap) => {
            if (snap.exists()) {
                score = snap.val().points;
                scoreEl.innerText = score.toLocaleString();
            }
        });

        document.getElementById('coinBtn').addEventListener('touchstart', (e) => {
            e.preventDefault();
            if (energy > 0) {
                score++;
                energy--;
                
                scoreEl.innerText = score.toLocaleString();
                energyEl.innerText = energy;
                energyFill.style.width = (energy / maxEnergy * 100) + '%';
                
                localStorage.setItem('sol_score', score);
                if (tg.HapticFeedback) tg.HapticFeedback.impactOccurred('medium');

                // Floating point effect
                const touch = e.touches[0];
                const pop = document.createElement('div');
                pop.className = 'floating-point';
                pop.innerText = '+1';
                pop.style.left = touch.clientX + 'px';
                pop.style.top = touch.clientY + 'px';
                document.body.appendChild(pop);
                setTimeout(() => pop.remove(), 700);

                // Sync every 5 taps
                if (score % 5 === 0) {
                    db.ref('players/' + userId).update({
                        points: score,
                        last_active: new Date().toISOString()
                    });
                }
            }
        });

        // Recharge Energy
        setInterval(() => {
            if (energy < maxEnergy) {
                energy += 2;
                energyEl.innerText = energy;
                energyFill.style.width = (energy / maxEnergy * 100) + '%';
            }
        }, 1000);
    </script>
</body>
</html>
